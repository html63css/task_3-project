{% extends 'main/base.html' %}

{% block content %}

{% if request.user.is_authenticated %}
<h1 class="text-center">User: {{ request.user.username }}</h1>

<form action="users_table" method="get">
<div class="jumbotron d-flex align-items-center ">
  <div class="container text-center">
    <button name="action" value="Block" class="btn btn-primary" type="submit">Block</button>
    <button name="action" value="Unblock" class="btn btn-primary" type="submit">Unblock</button>
    <button disabled name="action" value="Delete" class="btn btn-primary" type="submit">Delete</button>
  </div>
</div>
<table class="table">
  <thead>
    <tr>
      <th scope="col"><input class="form-check-input" type="checkbox" value="all" name="id_user" id="flexCheckDefault"></th>
      <th scope="col">id</th>
      <th scope="col">Username</th>
      <th scope="col">Email</th>
      <th scope="col">Registration date</th>
      <th scope="col">Last login date</th>
      <th scope="col">Status</th>
    </tr>
  </thead>
  <tbody>
    {% for i,j in context.items %}
    <tr>
      <th><input class="form-check-input" type="checkbox" value="{{ i.id }}" name="id_user" id="flexCheckDefault"></th>
      <th scope="row">{{i.id}}</th>
      <td>{{i.username}}</td>
      <td>{{i.email}}</td>
      <td>{{i.date_joined}}</td>
      <td>{{i.last_login}}</td>
      <td>{{j}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</form>

<div class="jumbotron align-items-center min-vh-100">
  <div class="container text-center">
<form action="{% url 'log_out' %}">
  <input type="submit" class="btn btn-primary" value="Log out of your account">
</form>
</div>
</div>

{% else %}
  <h1 class="text-center">You are not authorized</h1>
  <br>
  <div class="jumbotron align-items-center">
    <div class="container text-center">
      <!-- Log in to account -->
      <form action="log_in">
        <input type="submit" class="btn btn-primary" value="Log in to your account">
      </form>
      <br>
      <!-- Create account -->
      <form action="sign_up">
        <input type="submit" class="btn btn-primary" value="Create account">
      </form>
    </div>
  </div>
{% endif %}

{% endblock %}
